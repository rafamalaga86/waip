{% extends 'parts/base.html' %}
{% load math_tags %}

{% block main %}
  <section class="title small text-center"><h1>{{ title }}</h1></section>
  <section class="grid">
    {% for game in games %}
      <div class="card card-{{ game.id }} card-bg-{{ game.id|mod:7 }} {{ game.notes|yesno:',without-notes' }}" data-game-id="{{ game.id }}" data-game-name="{{ game.name }}">
        <img class="card-imgCover" src="{{ game.coverUrl }}" alt="{{ game.name }} Cover">
        <div class="card-imgOverlay">
          {% if not game.stopped_playing_at %}
            <div class="action-finish-game" data-toggle="tooltip" data-placement="bottom" title="Marcar juego como terminado">
              <i class="fa fa-check" aria-hidden="true"></i>
            </div>
          {% endif %}
          <a href="{% url 'modify_game' game.id %}" data-toggle="tooltip" data-placement="bottom" title="Editar juego">
            <i class="fa fa-pencil" aria-hidden="true"></i>
          </a>
          <div class="action-add-note" data-toggle="tooltip" data-placement="bottom" title="Añadir nota">
            <i class="fa fa-sticky-note" aria-hidden="true"></i>
          </div>
        </div>
        <div class="card-scores d-flex">
          {% if game.metacriticScore %}
            <div class="score-metacriticScore">
                <span>{{ game.metacriticScore }}<span>
            </div>
          {% endif %}
          <div class="score-hltbLength {{ game.metacriticScore|yesno:',full' }}">
            {{ game.hltbLength|default_if_none:'Unknown!' }}
            {{ game.hltbLength|yesno:'Hours,' }}</div>
        </div>
        <div class="card-content">
          <div class="card-gameTitle {{ game.notes|yesno:',alone' }}"><span style="display:none;white-space:nowrap;">{{ game.name }}</span></div>
            {% for note in game.notes %}
              <p class="card-text">{{ note.text }}</p>
            {% endfor %}
        </div>
      </div>
    {% empty %}
        <span>Sorry, we did not find any game</span>
    {% endfor %}

  </div>
{% endblock %}